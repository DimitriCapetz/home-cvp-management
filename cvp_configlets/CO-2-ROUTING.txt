vlan 4
   name ISP_Peering
!
vlan 10
   name Shared_VLAN
!
vlan 1012
   name CO-2_L2_Service
!
vlan 1013
   name CO-3_L2_Service
!
vlan 1014
   name CO-4_L2_Service
!
interface Ethernet1
   description L3 Transport Link to CO-1 Et1
   no switchport
   ip address 192.168.12.2/30
   isis enable 100
   isis circuit-type level-2
   isis network point-to-point
   pim ipv4 sparse-mode
!
interface Ethernet2
   description L3 Transport Link to CO-4 Et1
   no switchport
   ip address 192.168.24.1/30
   isis enable 100
   isis circuit-type level-2
   isis network point-to-point
   pim ipv4 sparse-mode
!
interface Loopback0
   description Router-ID / Management
   ip address 192.168.255.2/32
   isis enable 100
   isis passive
   node-segment ipv4 index 2
!
interface Vlan4
   description DIA Peering Network
   ip address 4.4.4.1/30
   isis enable 100
   isis passive
!
ip prefix-list LOCAL-ROUTES seq 100 permit 100.2.1.0/24
ip prefix-list LOCAL-ROUTES seq 110 permit 10.2.2.0/24
!
ip prefix-list SP-ROUTES seq 100 permit 100.0.0.0/8 eq 24
!
route-map LOCAL-ROUTES permit 100
   match ip address prefix-list LOCAL-ROUTES
!
route-map SP-ROUTES permit 100
   match ip address prefix-list SP-ROUTES
!
mpls ip
!
router bgp 111
   no bgp default ipv4-unicast
   maximum-paths 2
   neighbor CO peer group
   neighbor CO remote-as 111
   neighbor CO update-source Loopback0
   neighbor CO send-community standard extended
   neighbor CO maximum-routes 12000 
   neighbor 4.4.4.2 remote-as 222
   neighbor 4.4.4.2 route-map SP-ROUTES out
   neighbor 192.168.255.1 peer group CO
   neighbor 192.168.255.3 peer group CO
   neighbor 192.168.255.4 peer group CO
   !
   address-family ipv4
      neighbor CO activate
      neighbor 4.4.4.2 activate
      redistribute connected route-map LOCAL-ROUTES
   !
   address-family evpn
      neighbor default encapsulation mpls next-hop-self source-interface Loopback0
      neighbor CO activate
   !
   vlan 10
      rd auto
      route-target both 10:10
      redistribute learned
   !
   vlan 1012
      rd auto
      route-target both 1012:1012
      redistribute learned
   !
   vlan 1013
      rd auto
      route-target both 1013:1013
      redistribute learned
   !
   vlan 1014
      rd auto
      route-target both 1014:1014
      redistribute learned
!
router isis 100
   net 49.1111.0000.0002.00
   is-type level-2
   timers local-convergence-delay protected-prefixes
   !
   address-family ipv4 unicast
      fast-reroute ti-lfa mode node-protection level-2
   !
   segment-routing mpls
      no shutdown
!
router general
   router-id ipv4 192.168.255.2