---
# -------------------------------------------------------------------
# DCI Topology with external Core L3 Devices
# 6 Core PEs, 6 L2 Access with 1 CE Each
# Reconfigurable between VXLAN and MPLS
# -------------------------------------------------------------------

name: prime-topo

mgmt:
  network: clab_mgmt
  bridge: br0
  ipv4_subnet: 10.99.99.0/24
  ipv4-gw: 10.99.99.1

topology:

  nodes: 

#########################
# CORE                  #
#########################

    PRIME-DC1-CORE1:
      kind: ceos
      image: ceos:4.28.1F
      mgmt_ipv4: 10.99.99.72
      startup-config: ./configs/PRIME-DC1-CORE1.cfg
      binds:
        - ./configs/core-mappings.json:/mnt/flash/EosIntfMapping.json:ro

    PRIME-DC1-CORE2:
      kind: ceos
      image: ceos:4.28.1F
      mgmt_ipv4: 10.99.99.73
      startup-config: ./configs/PRIME-DC1-CORE2.cfg
      binds:
        - ./configs/core-mappings.json:/mnt/flash/EosIntfMapping.json:ro

    PRIME-DC2-CORE1:
      kind: ceos
      image: ceos:4.28.1F
      mgmt_ipv4: 10.99.99.74
      startup-config: ./configs/PRIME-DC2-CORE1.cfg
      binds:
        - ./configs/core-mappings.json:/mnt/flash/EosIntfMapping.json:ro

    PRIME-DC2-CORE2:
      kind: ceos
      image: ceos:4.28.1F
      mgmt_ipv4: 10.99.99.75
      startup-config: ./configs/PRIME-DC2-CORE2.cfg
      binds:
        - ./configs/core-mappings.json:/mnt/flash/EosIntfMapping.json:ro

    PRIME-DC3-CORE1:
      kind: ceos
      image: ceos:4.28.1F
      mgmt_ipv4: 10.99.99.76
      startup-config: ./configs/PRIME-DC3-CORE1.cfg
      binds:
        - ./configs/core-mappings.json:/mnt/flash/EosIntfMapping.json:ro

    PRIME-DC3-CORE2:
      kind: ceos
      image: ceos:4.28.1F
      mgmt_ipv4: 10.99.99.77
      startup-config: ./configs/PRIME-DC3-CORE2.cfg
      binds:
        - ./configs/core-mappings.json:/mnt/flash/EosIntfMapping.json:ro

#########################
# ACCESS                #
#########################

    PRIME-DC1-ACCESS1:
      kind: ceos
      image: ceos:4.28.1F
      mgmt_ipv4: 10.99.99.78
      startup-config: ./configs/PRIME-DC1-ACCESS1.cfg
      binds:
        - ./configs/access-mappings.json:/mnt/flash/EosIntfMapping.json:ro

    PRIME-DC1-ACCESS2:
      kind: ceos
      image: ceos:4.28.1F
      mgmt_ipv4: 10.99.99.79
      startup-config: ./configs/PRIME-DC1-ACCESS2.cfg
      binds:
        - ./configs/access-mappings.json:/mnt/flash/EosIntfMapping.json:ro

    PRIME-DC2-ACCESS1:
      kind: ceos
      image: ceos:4.28.1F
      mgmt_ipv4: 10.99.99.80
      startup-config: ./configs/PRIME-DC2-ACCESS1.cfg
      binds:
        - ./configs/access-mappings.json:/mnt/flash/EosIntfMapping.json:ro

    PRIME-DC2-ACCESS2:
      kind: ceos
      image: ceos:4.28.1F
      mgmt_ipv4: 10.99.99.81
      startup-config: ./configs/PRIME-DC2-ACCESS2.cfg
      binds:
        - ./configs/access-mappings.json:/mnt/flash/EosIntfMapping.json:ro

    PRIME-DC3-ACCESS1:
      kind: ceos
      image: ceos:4.28.1F
      mgmt_ipv4: 10.99.99.82
      startup-config: ./configs/PRIME-DC3-ACCESS1.cfg
      binds:
        - ./configs/access-mappings.json:/mnt/flash/EosIntfMapping.json:ro

    PRIME-DC3-ACCESS2:
      kind: ceos
      image: ceos:4.28.1F
      mgmt_ipv4: 10.99.99.83
      startup-config: ./configs/PRIME-DC3-ACCESS2.cfg
      binds:
        - ./configs/access-mappings.json:/mnt/flash/EosIntfMapping.json:ro

###########################################
# CE Simulation                           #
###########################################

    PRIME-DC1-CE1:
      kind: ceos
      image: ceos:4.28.1F
      mgmt_ipv4: 10.99.99.84
      startup-config: ./configs/PRIME-DC1-CE1.cfg
      binds:
        - ./configs/access-mappings.json:/mnt/flash/EosIntfMapping.json:ro

    PRIME-DC2-CE1:
      kind: ceos
      image: ceos:4.28.1F
      mgmt_ipv4: 10.99.99.85
      startup-config: ./configs/PRIME-DC2-CE1.cfg
      binds:
        - ./configs/access-mappings.json:/mnt/flash/EosIntfMapping.json:ro

    PRIME-DC3-CE1:
      kind: ceos
      image: ceos:4.28.1F
      mgmt_ipv4: 10.99.99.86
      startup-config: ./configs/PRIME-DC3-CE1.cfg
      binds:
        - ./configs/access-mappings.json:/mnt/flash/EosIntfMapping.json:ro

  links:
####################
# CORE to ACCESS   #
####################
    - endpoints: ["PRIME-DC1-CORE1:eth1", "PRIME-DC1-ACCESS1:eth3"]
    - endpoints: ["PRIME-DC1-CORE1:eth2", "PRIME-DC1-ACCESS2:eth3"]
    - endpoints: ["PRIME-DC1-CORE2:eth1", "PRIME-DC1-ACCESS1:eth4"]
    - endpoints: ["PRIME-DC1-CORE2:eth2", "PRIME-DC1-ACCESS2:eth4"]
    - endpoints: ["PRIME-DC2-CORE1:eth1", "PRIME-DC2-ACCESS1:eth3"]
    - endpoints: ["PRIME-DC2-CORE1:eth2", "PRIME-DC2-ACCESS2:eth3"]
    - endpoints: ["PRIME-DC2-CORE2:eth1", "PRIME-DC2-ACCESS1:eth4"]
    - endpoints: ["PRIME-DC2-CORE2:eth2", "PRIME-DC2-ACCESS2:eth4"]
    - endpoints: ["PRIME-DC3-CORE1:eth1", "PRIME-DC3-ACCESS1:eth3"]
    - endpoints: ["PRIME-DC3-CORE1:eth2", "PRIME-DC3-ACCESS2:eth3"]
    - endpoints: ["PRIME-DC3-CORE2:eth1", "PRIME-DC3-ACCESS1:eth4"]
    - endpoints: ["PRIME-DC3-CORE2:eth2", "PRIME-DC3-ACCESS2:eth4"]
####################
# Peer-Links       #
####################
    - endpoints: ["PRIME-DC1-CORE1:eth9", "PRIME-DC1-CORE2:eth9"]
    - endpoints: ["PRIME-DC1-CORE1:eth10", "PRIME-DC1-CORE2:eth10"]
    - endpoints: ["PRIME-DC2-CORE1:eth9", "PRIME-DC2-CORE2:eth9"]
    - endpoints: ["PRIME-DC2-CORE1:eth10", "PRIME-DC2-CORE2:eth10"]
    - endpoints: ["PRIME-DC3-CORE1:eth9", "PRIME-DC3-CORE2:eth9"]
    - endpoints: ["PRIME-DC3-CORE1:eth10", "PRIME-DC3-CORE2:eth10"]
    - endpoints: ["PRIME-DC1-ACCESS1:eth9", "PRIME-DC1-ACCESS2:eth9"]
    - endpoints: ["PRIME-DC1-ACCESS1:eth10", "PRIME-DC1-ACCESS2:eth10"]
    - endpoints: ["PRIME-DC2-ACCESS1:eth9", "PRIME-DC2-ACCESS2:eth9"]
    - endpoints: ["PRIME-DC2-ACCESS1:eth10", "PRIME-DC2-ACCESS2:eth10"]
    - endpoints: ["PRIME-DC3-ACCESS1:eth9", "PRIME-DC3-ACCESS2:eth9"]
    - endpoints: ["PRIME-DC3-ACCESS1:eth10", "PRIME-DC3-ACCESS2:eth10"]
####################
# DCI Connections  #
####################
    - endpoints: ["PRIME-DC1-CORE1:eth3", "PRIME-DC2-CORE2:eth3"]
    - endpoints: ["PRIME-DC1-CORE1:eth4", "PRIME-DC3-CORE1:eth4"]
    - endpoints: ["PRIME-DC1-CORE2:eth3", "PRIME-DC3-CORE2:eth3"]
    - endpoints: ["PRIME-DC1-CORE2:eth4", "PRIME-DC3-CORE2:eth4"]
    - endpoints: ["PRIME-DC2-CORE1:eth3", "PRIME-DC3-CORE1:eth3"]
####################
# CE Uplinks       #
####################
    - endpoints: ["PRIME-DC1-ACCESS1:eth1", "PRIME-DC1-CE1:eth1"]
    - endpoints: ["PRIME-DC1-ACCESS2:eth1", "PRIME-DC1-CE1:eth2"]
    - endpoints: ["PRIME-DC2-ACCESS1:eth1", "PRIME-DC2-CE1:eth1"]
    - endpoints: ["PRIME-DC2-ACCESS2:eth1", "PRIME-DC2-CE1:eth2"]
    - endpoints: ["PRIME-DC3-ACCESS1:eth1", "PRIME-DC3-CE1:eth1"]
    - endpoints: ["PRIME-DC3-ACCESS2:eth1", "PRIME-DC3-CE1:eth2"]