---
# --------------------------------------------------------------------------
# Full Simulation of Premier Network
# --------------------------------------------------------------------------

name: premier-topo
prefix: ""

mgmt:
  network: clab_mgmt
  bridge: br0
  ipv4_subnet: 10.99.99.0/24
  ipv4-gw: 10.99.99.1

topology:

  kinds:
    ceos:
      image: ceos:4.28.3M
    linux:
      image: mitchv85/ohv-host

  nodes: 

###########################################
# Graphite Node                           #
# Provides Topology Graphing and the      #
# ability to connect to nodes in the      #
# topology via a web/ssh session          #
###########################################

    graphite:
      kind: linux
      image: netreplica/graphite
      mgmt_ipv4: 10.99.99.87
      env:
        GRAPHITE_DEFAULT_TYPE: clab
        GRAPHITE_DEFAULT_TOPO: premier-topo
        # CLAB_SSH_CONNECTION: ${SSH_CONNECTION}
      binds:
        # - .:/var/www/localhost/htdocs/clab   <----  This is the old path in docker image netreplica/graphite:webssh2
        - .:/htdocs/clab    # New path required for latest version
      ports:
        - 80:80
      exec:
        # - sh -c 'generate_offline_graph.sh'   # used to generate offline graphs
        - sh -c 'graphite_motd.sh 80'
      labels:
        graph-hide: yes

##########################
# ERs / Route Reflectors #
##########################

    SiouxCenter-ER1:
      kind: ceos
      mgmt_ipv4: 10.99.99.178
      startup-config: ./configs/SiouxCenter-ER1.cfg
      binds:
        - ./configs/7280SR-48C6-mappings.json:/mnt/flash/EosIntfMapping.json:ro
      labels:
        graph-level: 1
        graph-icon: switch

    Hospers-ER1:
      kind: ceos
      mgmt_ipv4: 10.99.99.179
      startup-config: ./configs/Hospers-ER1.cfg
      binds:
        - ./configs/7280SR-48C6-mappings.json:/mnt/flash/EosIntfMapping.json:ro
      labels:
        graph-level: 1
        graph-icon: switch

################
# Core Routers #
################

    SiouxCenter-CR1:
      kind: ceos
      mgmt_ipv4: 10.99.99.180
      startup-config: ./configs/SiouxCenter-CR1.cfg
      binds:
        - ./configs/7280SR-48C6-mappings.json:/mnt/flash/EosIntfMapping.json:ro
      labels:
        graph-level: 2
        graph-icon: switch

    SiouxCenter-CR2:
      kind: ceos
      mgmt_ipv4: 10.99.99.181
      startup-config: ./configs/SiouxCenter-CR2.cfg
      binds:
        - ./configs/7280SR-48C6-mappings.json:/mnt/flash/EosIntfMapping.json:ro
      labels:
        graph-level: 2
        graph-icon: switch

    Hospers-CR1:
      kind: ceos
      mgmt_ipv4: 10.99.99.182
      startup-config: ./configs/Hospers-CR1.cfg
      binds:
        - ./configs/7280SR-48C6-mappings.json:/mnt/flash/EosIntfMapping.json:ro
      labels:
        graph-level: 2
        graph-icon: switch

    Hospers-CR2:
      kind: ceos
      mgmt_ipv4: 10.99.99.183
      startup-config: ./configs/Hospers-CR2.cfg
      binds:
        - ./configs/7280SR-48C6-mappings.json:/mnt/flash/EosIntfMapping.json:ro
      labels:
        graph-level: 2
        graph-icon: switch

    OrangeCity-CR1:
      kind: ceos
      mgmt_ipv4: 10.99.99.184
      startup-config: ./configs/OrangeCity-CR1.cfg
      binds:
        - ./configs/7280SR-48C6-mappings.json:/mnt/flash/EosIntfMapping.json:ro
      labels:
        graph-level: 2
        graph-icon: switch

    OrangeCity-CR2:
      kind: ceos
      mgmt_ipv4: 10.99.99.185
      startup-config: ./configs/OrangeCity-CR2.cfg
      binds:
        - ./configs/7280SR-48C6-mappings.json:/mnt/flash/EosIntfMapping.json:ro
      labels:
        graph-level: 2
        graph-icon: switch

    LeMars-CR1:
      kind: ceos
      mgmt_ipv4: 10.99.99.186
      startup-config: ./configs/LeMars-CR1.cfg
      binds:
        - ./configs/7280SR-48C6-mappings.json:/mnt/flash/EosIntfMapping.json:ro
      labels:
        graph-level: 2
        graph-icon: switch

    LeMars-CR2:
      kind: ceos
      mgmt_ipv4: 10.99.99.187
      startup-config: ./configs/LeMars-CR2.cfg
      binds:
        - ./configs/7280SR-48C6-mappings.json:/mnt/flash/EosIntfMapping.json:ro
      labels:
        graph-level: 2
        graph-icon: switch

    Ireton-CR1:
      kind: ceos
      mgmt_ipv4: 10.99.99.188
      startup-config: ./configs/Ireton-CR1.cfg
      binds:
        - ./configs/7280SR-48C6-mappings.json:/mnt/flash/EosIntfMapping.json:ro
      labels:
        graph-level: 2
        graph-icon: switch

    Hull-CR1:
      kind: ceos
      mgmt_ipv4: 10.99.99.189
      startup-config: ./configs/Hull-CR1.cfg
      binds:
        - ./configs/7280SR-48C6-mappings.json:/mnt/flash/EosIntfMapping.json:ro
      labels:
        graph-level: 3
        graph-icon: switch

    Hull-CR2:
      kind: ceos
      mgmt_ipv4: 10.99.99.190
      startup-config: ./configs/Hull-CR2.cfg
      binds:
        - ./configs/7280SR-48C6-mappings.json:/mnt/flash/EosIntfMapping.json:ro
      labels:
        graph-level: 3
        graph-icon: switch

    Sheldon-CR1:
      kind: ceos
      mgmt_ipv4: 10.99.99.191
      startup-config: ./configs/Sheldon-CR1.cfg
      binds:
        - ./configs/7280SR-48C6-mappings.json:/mnt/flash/EosIntfMapping.json:ro
      labels:
        graph-level: 3
        graph-icon: switch

    Sheldon-CR2:
      kind: ceos
      mgmt_ipv4: 10.99.99.192
      startup-config: ./configs/Sheldon-CR2.cfg
      binds:
        - ./configs/7280SR-48C6-mappings.json:/mnt/flash/EosIntfMapping.json:ro
      labels:
        graph-level: 3
        graph-icon: switch

    Boyden-CR1:
      kind: ceos
      mgmt_ipv4: 10.99.99.193
      startup-config: ./configs/Boyden-CR1.cfg
      binds:
        - ./configs/7280SR-48C6-mappings.json:/mnt/flash/EosIntfMapping.json:ro
      labels:
        graph-level: 3
        graph-icon: switch

    RockValley-CR1:
      kind: ceos
      mgmt_ipv4: 10.99.99.194
      startup-config: ./configs/RockValley-CR1.cfg
      binds:
        - ./configs/7280SR-48C6-mappings.json:/mnt/flash/EosIntfMapping.json:ro
      labels:
        graph-level: 4
        graph-icon: switch

    RockValley-CR2:
      kind: ceos
      mgmt_ipv4: 10.99.99.195
      startup-config: ./configs/RockValley-CR2.cfg
      binds:
        - ./configs/7280SR-48C6-mappings.json:/mnt/flash/EosIntfMapping.json:ro
      labels:
        graph-level: 4
        graph-icon: switch

    Sibley-CR1:
      kind: ceos
      mgmt_ipv4: 10.99.99.196
      startup-config: ./configs/Sibley-CR1.cfg
      binds:
        - ./configs/7280SR-48C6-mappings.json:/mnt/flash/EosIntfMapping.json:ro
      labels:
        graph-level: 4
        graph-icon: switch

    Sibley-CR2:
      kind: ceos
      mgmt_ipv4: 10.99.99.197
      startup-config: ./configs/Sibley-CR2.cfg
      binds:
        - ./configs/7280SR-48C6-mappings.json:/mnt/flash/EosIntfMapping.json:ro
      labels:
        graph-level: 4
        graph-icon: switch

    George-CR1:
      kind: ceos
      mgmt_ipv4: 10.99.99.198
      startup-config: ./configs/George-CR1.cfg
      binds:
        - ./configs/7280SR-48C6-mappings.json:/mnt/flash/EosIntfMapping.json:ro
      labels:
        graph-level: 4
        graph-icon: switch

    RockRapids-CR1:
      kind: ceos
      mgmt_ipv4: 10.99.99.199
      startup-config: ./configs/RockRapids-CR1.cfg
      binds:
        - ./configs/7280SR-48C6-mappings.json:/mnt/flash/EosIntfMapping.json:ro
      labels:
        graph-level: 5
        graph-icon: switch

    RockRapids-CR2:
      kind: ceos
      mgmt_ipv4: 10.99.99.200
      startup-config: ./configs/RockRapids-CR2.cfg
      binds:
        - ./configs/7280SR-48C6-mappings.json:/mnt/flash/EosIntfMapping.json:ro
      labels:
        graph-level: 5
        graph-icon: switch

    LittleRock-CR1:
      kind: ceos
      mgmt_ipv4: 10.99.99.201
      startup-config: ./configs/LittleRock-CR1.cfg
      binds:
        - ./configs/7280SR-48C6-mappings.json:/mnt/flash/EosIntfMapping.json:ro
      labels:
        graph-level: 5
        graph-icon: switch

    Doon-CR1:
      kind: ceos
      mgmt_ipv4: 10.99.99.202
      startup-config: ./configs/Doon-CR1.cfg
      binds:
        - ./configs/7280SR-48C6-mappings.json:/mnt/flash/EosIntfMapping.json:ro
      labels:
        graph-level: 5
        graph-icon: switch

  links:
##############
# Peer-links #
##############
    - endpoints: ["SiouxCenter-CR1:eth5", "SiouxCenter-CR2:eth5"]
    - endpoints: ["SiouxCenter-CR1:eth6", "SiouxCenter-CR2:eth6"]
    - endpoints: ["Hospers-CR1:eth5", "Hospers-CR2:eth5"]
    - endpoints: ["Hospers-CR1:eth6", "Hospers-CR2:eth6"]
    - endpoints: ["OrangeCity-CR1:eth5", "OrangeCity-CR2:eth5"]
    - endpoints: ["OrangeCity-CR1:eth6", "OrangeCity-CR2:eth6"]
    - endpoints: ["LeMars-CR1:eth5", "LeMars-CR2:eth5"]
    - endpoints: ["LeMars-CR1:eth6", "LeMars-CR2:eth6"]
    - endpoints: ["Hull-CR1:eth5", "Hull-CR2:eth5"]
    - endpoints: ["Hull-CR1:eth6", "Hull-CR2:eth6"]
    - endpoints: ["Sheldon-CR1:eth5", "Sheldon-CR2:eth5"]
    - endpoints: ["Sheldon-CR1:eth6", "Sheldon-CR2:eth6"]
    - endpoints: ["RockValley-CR1:eth5", "RockValley-CR2:eth5"]
    - endpoints: ["RockValley-CR1:eth6", "RockValley-CR2:eth6"]
    - endpoints: ["Sibley-CR1:eth5", "Sibley-CR2:eth5"]
    - endpoints: ["Sibley-CR1:eth6", "Sibley-CR2:eth6"]
    - endpoints: ["RockRapids-CR1:eth5", "RockRapids-CR2:eth5"]
    - endpoints: ["RockRapids-CR1:eth6", "RockRapids-CR2:eth6"]
##############
# ER Uplinks #
##############
    - endpoints: ["SiouxCenter-CR1:eth9", "SiouxCenter-ER1:eth9"]
    - endpoints: ["SiouxCenter-CR2:eth9", "SiouxCenter-ER1:eth10"]
    - endpoints: ["Hospers-CR1:eth9", "Hospers-ER1:eth9"]
    - endpoints: ["Hospers-CR2:eth9", "Hospers-ER1:eth10"]
#################
# ER Peer-links #
#################
    - endpoints: ["SiouxCenter-ER1:eth5", "Hospers-ER1:eth5"]
    - endpoints: ["SiouxCenter-ER1:eth6", "Hospers-ER1:eth6"]
####################
# Ring Connections #
####################
    - endpoints: ["SiouxCenter-CR1:eth7", "Ireton-CR1:eth8"]
    - endpoints: ["LeMars-CR2:eth7", "Ireton-CR1:eth7"]
    - endpoints: ["LeMars-CR1:eth7", "OrangeCity-CR2:eth7"]
    - endpoints: ["Hospers-CR2:eth7", "OrangeCity-CR1:eth7"]
    - endpoints: ["Hospers-CR1:eth7", "Sheldon-CR2:eth8"]
    - endpoints: ["Boyden-CR1:eth7", "Sheldon-CR2:eth7"]
    - endpoints: ["Boyden-CR1:eth8", "Hull-CR1:eth7"]
    - endpoints: ["RockValley-CR1:eth7", "Hull-CR2:eth7"]
    - endpoints: ["SiouxCenter-CR2:eth7", "Hull-CR2:eth8"]
    - endpoints: ["RockValley-CR2:eth7", "Doon-CR1:eth7"]
    - endpoints: ["RockRapids-CR1:eth7", "Doon-CR1:eth8"]
    - endpoints: ["RockRapids-CR2:eth7", "LittleRock-CR1:eth7"]
    - endpoints: ["Sibley-CR1:eth7", "LittleRock-CR1:eth8"]
    - endpoints: ["Sibley-CR2:eth7", "Sheldon-CR1:eth7"]
    - endpoints: ["RockRapids-CR2:eth8", "George-CR1:eth8"]
    - endpoints: ["Boyden-CR1:eth9", "George-CR1:eth7"]