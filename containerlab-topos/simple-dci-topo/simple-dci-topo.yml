---
name: simple-dci-topo
prefix: ""

mgmt:
  network: clab_mgmt
  bridge: br0
  ipv4-subnet: 10.99.99.0/24
  ipv4-gw: 10.99.99.1

topology:

  kinds:
    ceos:
      image: ceos:4.31.2F

  nodes: 

################
# DC1          #
################

    DC1-SPINE1:
      kind: ceos
      image: ceos:4.31.2F
      mgmt-ipv4: 10.99.99.17
      startup-config: ./configs/DC1-SPINE1.cfg
      binds:
        - ./configs/spine-mappings.json:/mnt/flash/EosIntfMapping.json:ro

    DC1-SPINE2:
      kind: ceos
      image: ceos:4.31.2F
      mgmt-ipv4: 10.99.99.18
      startup-config: ./configs/DC1-SPINE2.cfg
      binds:
        - ./configs/spine-mappings.json:/mnt/flash/EosIntfMapping.json:ro

    DC1-LEAF1:
      kind: ceos
      image: ceos:4.31.2F
      mgmt-ipv4: 10.99.99.19
      startup-config: ./configs/DC1-LEAF1.cfg
      binds:
        - ./configs/leaf-mappings.json:/mnt/flash/EosIntfMapping.json:ro

    DC1-BORDER1:
      kind: ceos
      image: ceos:4.31.2F
      mgmt-ipv4: 10.99.99.20
      startup-config: ./configs/DC1-BORDER1.cfg
      binds:
        - ./configs/leaf-mappings.json:/mnt/flash/EosIntfMapping.json:ro

    DC1-BORDER2:
      kind: ceos
      image: ceos:4.31.2F
      mgmt-ipv4: 10.99.99.21
      startup-config: ./configs/DC1-BORDER2.cfg
      binds:
        - ./configs/leaf-mappings.json:/mnt/flash/EosIntfMapping.json:ro

################
# DC2          #
################

    DC2-SPINE1:
      kind: ceos
      image: ceos:4.31.2F
      mgmt-ipv4: 10.99.99.22
      startup-config: ./configs/DC2-SPINE1.cfg
      binds:
        - ./configs/spine-mappings.json:/mnt/flash/EosIntfMapping.json:ro

    DC2-SPINE2:
      kind: ceos
      image: ceos:4.31.2F
      mgmt-ipv4: 10.99.99.23
      startup-config: ./configs/DC2-SPINE2.cfg
      binds:
        - ./configs/spine-mappings.json:/mnt/flash/EosIntfMapping.json:ro

    DC2-LEAF1:
      kind: ceos
      image: ceos:4.31.2F
      mgmt-ipv4: 10.99.99.24
      startup-config: ./configs/DC2-LEAF1.cfg
      binds:
        - ./configs/leaf-mappings.json:/mnt/flash/EosIntfMapping.json:ro

    DC2-BORDER1:
      kind: ceos
      image: ceos:4.31.2F
      mgmt-ipv4: 10.99.99.25
      startup-config: ./configs/DC2-BORDER1.cfg
      binds:
        - ./configs/leaf-mappings.json:/mnt/flash/EosIntfMapping.json:ro

    DC2-BORDER2:
      kind: ceos
      image: ceos:4.31.2F
      mgmt-ipv4: 10.99.99.26
      startup-config: ./configs/DC2-BORDER2.cfg
      binds:
        - ./configs/leaf-mappings.json:/mnt/flash/EosIntfMapping.json:ro

  links:
####################
# SPINE1 to LEAVES #
####################
    - endpoints: ["DC1-SPINE1:eth1", "DC1-LEAF1:eth5"]
    - endpoints: ["DC1-SPINE1:eth2", "DC1-BORDER1:eth5"]
    - endpoints: ["DC1-SPINE1:eth3", "DC1-BORDER2:eth5"]
####################
# SPINE2 to LEAVES #
####################
    - endpoints: ["DC1-SPINE2:eth1", "DC1-LEAF1:eth6"]
    - endpoints: ["DC1-SPINE2:eth2", "DC1-BORDER1:eth6"]
    - endpoints: ["DC1-SPINE2:eth3", "DC1-BORDER2:eth6"]
####################
# MLAG Peer-links  #
####################
    - endpoints: ["DC1-BORDER1:eth9", "DC1-BORDER2:eth9"]
    - endpoints: ["DC1-BORDER1:eth10", "DC1-BORDER2:eth10"]
####################
# SPINE1 to LEAVES #
####################
    - endpoints: ["DC2-SPINE1:eth1", "DC2-LEAF1:eth5"]
    - endpoints: ["DC2-SPINE1:eth2", "DC2-BORDER1:eth5"]
    - endpoints: ["DC2-SPINE1:eth3", "DC2-BORDER2:eth5"]
####################
# SPINE2 to LEAVES #
####################
    - endpoints: ["DC2-SPINE2:eth1", "DC2-LEAF1:eth6"]
    - endpoints: ["DC2-SPINE2:eth2", "DC2-BORDER1:eth6"]
    - endpoints: ["DC2-SPINE2:eth3", "DC2-BORDER2:eth6"]
####################
# MLAG Peer-links  #
####################
    - endpoints: ["DC2-BORDER1:eth9", "DC2-BORDER2:eth9"]
    - endpoints: ["DC2-BORDER1:eth10", "DC2-BORDER2:eth10"]
####################
# DCI Connections  #
####################
    - endpoints: ["DC1-BORDER1:eth1", "DC2-BORDER1:eth1"]
    - endpoints: ["DC1-BORDER2:eth2", "DC2-BORDER2:eth2"]